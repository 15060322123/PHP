PHP 的生命周期
===

让我们从 SAPI 开始
---

+ SPAI (Server Application Programming Interface)
  > SAPI 就是 PHP 和外部环境的代理器。它把外部环境抽象后, 为内部的 PHP 提供一套固定的, 统一的接口, 使得 PHP 自身实现能够不受错综复杂的外部环境影响，保持一定的独立性。相关链接：[深入理解 Zend SAPIs](http://www.laruence.com/2008/08/12/180.html)

+ CLI (Command-line Interface)

PHP 的启动与终止
---

+ PHP 程序的启动与终止可以看作两个概念
  + 作为 Apache 的一个模块启动与终止
  + 当 Apache 分配一个页面请求的时候，PHP会有一次启动与终止

+ MINIT (Module Initialization)
  > PHP_MINIT_FUNCTION() 宏函数，这里定义的常量、类、资源等都会随着 Apache 常驻内存。

+ RINIT (Request Initialization)
  > PHP_RINIT_FUNCTION() 宏函数，将初始化在本次请求中会使用到的变量与 PHP 脚本中的变量。

+ RSHUTDOWN (Request Shutdown)
  > PHP_RSHUTDOWN_FUNCTION() 宏函数，会释放掉这次请求使用过的所有东西，包括变量表的所有变量、所有在这次请求中申请的内存等。

+ MSHUTDOWN (Module Shutdown)
  > PHP_MSHUTDOWN_FUNCTION() 宏函数，当 Apache 要停止时，会执行所有扩展中的 MSHUTDOWN 方法。

PHP 的生命周期
---

links
---

+ [目录](00.目录.md)
+ 上一节: 没有了
+ 下一节: [PHP变量在内核中的实现](02.PHP变量在内核中的实现.md)
