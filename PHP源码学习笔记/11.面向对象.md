面向对象
===

开篇
---

+ 基本概念 
  + 类。类是具体事物的抽象。通常类定义了事物的属性和所能完成的工作。有一点需要注意，并不是所有的面向对象编程语言的类都具有class这个明确的实体。例如Javascript就不是基于类的。 Javascript中的类(Function)也具有类定义的特性。这也印证了面向对象只是一种编程范式
  + 对象。对象是类的实例。对象是具体的
  + 方法。方法是类定义对象可以做的事情
  + 继承性。继承是类的具体化，子类是比具备更多特性和行为的类。面向对象是对现实世界的一个抽象。在很多时候的关系并不一定是继承关系。能在一定程序上实现代码的重用
  + 封装性、抽象性。封装性能实现的复杂性隐藏，减少出错的可能

类的结构和实现
---

+ _zend_class_entry 类的内部存储结构
  + name 类名
  + type 类别 (ZEND_INTERNAL_CLASS/ZEND_USER_CLASS)
  + parent 父类
  + refcount 引用计数
  + ce_flags 类的类型
  + function_table 函数列表
  + interfaces 接口列表
  + filename 存放文件绝对路径
  + line_start 类开始行数
  + line_end 类结束行数

+ 类的几种类型
  + 常规类 T_CLASS
  + 抽象类 T_ABSTRACT T_CLASS
  + final 类 T_FINAL T_CLASS
  + 没有加abstract关键字的抽象类 ZEND_ACC_IMPLICIT_ABSTRACT_CLASS
  + 接口 ZEND_ACC_INTERFACE
```
/* 常规类为0，在这里没有定义 */
#define ZEND_ACC_IMPLICIT_ABSTRACT_CLASS    0x10
#define ZEND_ACC_EXPLICIT_ABSTRACT_CLASS    0x20
#define ZEND_ACC_FINAL_CLASS                0x40
#define ZEND_ACC_INTERFACE                  0x80
```

+ zend_do_begin_class_declaration() 用来处理类名，类的类别和父类

+ zend_do_end_class_declaration() 用来处理接口和类的中间代码

类的成员变量
---

+ zend_do_declare_property 检查成员变量不允许的一些情况
  + 接口中不允许使用成员变量
  + 成员变量不能拥有抽象属性
  + 不能声明成员变量为final
  + 不能重复声明属性

+ default_properties 常规的成员变量最后都会注册到类结构的这个字段中

+ get_class_vars() 获取类的成员变量

+ default_static_members 类本身的静态变量存放在类结构的这个字段中

类的成员方法
---

+ zend_initialize_class_data 初始化了整个方法列表所在的哈希表

+ get_class_methods 获取类的成员方法

+ zend_fetch_class 通过类名在 EG(class_table) 中查找类

+ zend_std_get_static_method 查找 ce->function_table 列表，在查找到方法后检查方法的访问控制权限
